<?xml version="1.0" encoding="UTF-8"?>

<!-- ==== #29. mapper 기본설정 ==== -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- ==== #29. 루트 엘리먼트 & 네임스페이스 설정(프로젝트 전체내에서 유일해야 한다.) ==== -->
<!-- ==== 대부분은 namespace에 파일이름 사용(유일하니까) ==== -->
<mapper namespace="jieun">


	<!-- 등록 폼에 서브캘린더 가져오기 -->
	<select id="selectCalNo" parameterType="HashMap" resultType="com.spring.bts.jieun.model.CalendarVO">
		select pk_calno, fk_lgcatgono, calname
		from tbl_calendar
		where fk_lgcatgono = #{fk_lgcatgono} and fk_emp_no =#{fk_emp_no}
		order by pk_calno asc
	</select>

	<!-- 사내 캘린더에 사내 캘린더 소분류 추가하기  -->
	<insert id="addComCalendar" parameterType="HashMap">
		insert into tbl_calendar(pk_calno, fk_lgcatgono, calname, fk_emp_no)
		values (seq_calno.nextval, 2, #{addCom_calname}, #{fk_emp_no})
	</insert>

	<!-- 일정등록 하기  -->
	<insert id="scheduleRegisterInsert" parameterType="HashMap">
		insert into tbl_schedule(pk_schno, fk_emp_no, fk_calno, subject, startdate, enddate, content, color, place, joinuser, fk_lgcatgono)
		values(seq_schno.nextval, #{fk_emp_no}, #{fk_calno}, #{subject}, to_date(#{startdate}, 'yyyymmddhh24miss'), to_date(#{enddate}, 'yyyymmddhh24miss'), #{content}, #{color}, #{place}, #{joinuser}, #{fk_lgcatgono} )
	</insert>




<!-- // ======== ***** 파이널 옮기기 시작 ***** ======== //
	// === 일정 체크 박스 추가 === // -->
	
<!--  	<insert id="addCalenderName" parameterType="com.spring.board.model.CalenderVO">
		insert into tbl_calender(cal_no, fk_사원번호 ,cal_name, cal_color) 
      		values(calenderSeq.nextval, #{cal_name}, #{fk_사원번호},#{name}, default)

	</insert>
 --> 


</mapper>